{% load static %}
{% block content %}
<head>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css"/>
   <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css"/>
   <link href="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.7/dist/sweetalert2.min.css" rel="stylesheet">
</head>

<body>
   <div class="container mt-5">
       <button type="button" class="btn btn-primary mb-3" id="open-modal-btn">
           AÃ±adir Maestro
       </button>
       <h1>Lista de Maestros</h1>
       <table id="maestrosTable" class="display responsive nowrap" style="width:100%">
           <thead>
               <tr>
                   <th>ID</th>
                   <th>Nombre</th>
                   <th>Acciones</th>
               </tr>
           </thead>
           <tbody>
               {% for maestro in maestros %}
               <tr>
                   <td>{{ maestro.idMaestro }}</td>
                   <td>{{ maestro.Nombre }} {{ maestro.Apellido_Paterno }}</td>
                   <td>
                       <button class="btn btn-success edit-btn" data-id="{{ maestro.idMaestro }}">Editar</button>
                       <button class="btn btn-danger delete-btn" data-id="{{ maestro.idMaestro }}">Eliminar</button>
                   </td>
               </tr>
               {% endfor %}
           </tbody>
       </table>
   </div>

   <!-- Modal -->
   <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
       <div class="modal-dialog modal-dialog-centered">
           <div class="modal-content">
               <div class="modal-header">
                   <h5 class="modal-title" id="exampleModalLabel">Maestro</h5>
                   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
               <div class="modal-body">
                   <form id="modal-form" method="post" action="{% url 'nuevo_maestro' %}">
                       {% csrf_token %}
                       <input type="hidden" id="maestro_id" name="maestro_id" value="">
                       <div class="mb-3">
                           <label for="id_nombre" class="form-label">Nombre</label>
                           <input type="text" class="form-control" id="id_nombre" name="Nombre" required>
                       </div>
                       <div class="mb-3">
                           <label for="id_apellido_paterno" class="form-label">Apellido Paterno</label>
                           <input type="text" class="form-control" id="id_apellido_paterno" name="Apellido_Paterno" required>
                       </div>
                       <div class="mb-3">
                           <label for="id_apellido_materno" class="form-label">Apellido Materno</label>
                           <input type="text" class="form-control" id="id_apellido_materno" name="Apellido_Materno">
                       </div>
                       <button type="submit" class="btn btn-primary">Guardar</button>
                   </form>
               </div>
           </div>
       </div>
   </div>
</body>
{% endblock %}

{% block javascript %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.7/dist/sweetalert2.min.js"></script>
<script src="{% static 'js/maestro.js' %}"></script>
{% endblock %}
